# Run these in PM (Tools -> Nuget Package Manager Console -> Package Manager Console)
# https://docs.microsoft.com/en-us/ef/core/cli/powershell

Update-Database # Do if the database doesn't exists

# Make sure that in the Package Manager Console the default project is set to src\Mapline.Migrations

# Adds migrations
Add-Migration InitialMigration -Project Mapline.Migrations

# Verify that migration was added.
Get-Migration

# If you don't want to publish your migration, remove it
Remove-Migration

# Push your changes to the database
Update-Database 

# If you want to generate your change into a script
Script-Migration

# If you need to drop the whole database
dotnet ef database drop

### --- old

## Update Model to the database. If there is problems, add `-v` to the end of each call
# dotnet ef database update
cd {path-to-project}/src
dotnet ef migrations add InitialMigration -o ../data/Migrations/InitialMigration
dotnet ef migrations script -o ../data/SQL/initialMigration.sql
dotnet ef database update

## Another script that might be useful when troubleshooting
#dotnet ef migrations list -v

### Reset
dotnet ef database drop 
dotnet ef migrations remove

### --- old